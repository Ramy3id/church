<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>St. Mark Coptic Church - الكنيسة القبطية</title>
    
    <!-- Vue 3 & Vue I18n -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/vue-i18n@9"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&family=Cairo:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Config for Tailwind -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        coptic: {
                            burgundy: '#580a0a',
                            gold: '#c5a059',
                            beige: '#f9f7f2',
                            text: '#2d3748',
                            light: '#ffffff'
                        }
                    },
                    fontFamily: {
                        ar: ['Cairo', 'sans-serif'],
                        arSerif: ['Amiri', 'serif'],
                        it: ['Lato', 'sans-serif'],
                        itSerif: ['Playfair Display', 'serif'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Global Styles */
        body {
            background-color: #f9f7f2;
            color: #2d3748;
            transition: all 0.3s ease;
        }

        /* Language-specific Typography */
        :root[lang="ar"] body { font-family: 'Cairo', sans-serif; }
        :root[lang="it"] body { font-family: 'Lato', sans-serif; }
        :root[lang="ar"] h1, :root[lang="ar"] h2, :root[lang="ar"] h3 { font-family: 'Amiri', serif; }
        :root[lang="it"] h1, :root[lang="it"] h2, :root[lang="it"] h3 { font-family: 'Playfair Display', serif; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #c5a059; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #580a0a; }

        /* Cross Pattern Background */
        .bg-pattern {
            background-color: #f9f7f2;
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4v12M4 10h12' stroke='%23c5a059' stroke-width='1' opacity='0.15'/%3E%3C/svg%3E");
        }

        /* Reading Section Icon Wrapper */
        .icon-circle {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background-color: #f0f4f8;
            color: #580a0a;
            transition: all 0.3s;
        }
        .church-card:hover .icon-circle {
            background-color: #580a0a;
            color: #c5a059;
        }

        .fade-enter-active, .fade-leave-active { transition: opacity 0.3s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <div id="app" class="flex flex-col min-h-screen">
        
        <!-- ================= Top Date Bar ================= -->
        <div class="bg-coptic-burgundy text-coptic-gold text-sm py-2 border-b border-coptic-gold/30">
            <div class="container mx-auto px-4 flex justify-between items-center flex-wrap gap-2">
                <div class="flex items-center gap-2">
                    <i class="fas fa-calendar-alt"></i>
                    <span>{{ currentDate }}</span>
                </div>
                <div class="flex items-center gap-2 font-serif font-bold">
                    <i class="fas fa-cross"></i>
                    <span>{{ copticDate }}</span>
                </div>
            </div>
        </div>

        <!-- ================= Navbar ================= -->
        <nav class="bg-white shadow-md sticky top-0 z-50">
            <div class="container mx-auto px-4">
                <div class="flex justify-between items-center h-20">
                    <!-- Logo / Brand -->
                    <div class="flex items-center gap-3 cursor-pointer" @click="handleNavigation({ view: 'home' })">
                        <div class="w-10 h-10 bg-coptic-burgundy text-white rounded-full flex items-center justify-center text-xl shadow-lg border-2 border-coptic-gold">
                            <i class="fas fa-church"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-coptic-burgundy font-bold text-lg leading-tight">{{ t('churchName') }}</span>
                            <span class="text-xs text-gray-500">{{ t('city') }}</span>
                        </div>
                    </div>

                    <!-- Desktop Menu -->
                    <div class="hidden md:flex items-center gap-1 lg:gap-4">
                        <button v-for="item in navItems" :key="item.key" 
                           @click="handleNavigation(item)"
                           :class="(item.view && currentView === item.view) ? 'bg-coptic-burgundy/5 text-coptic-burgundy font-bold' : 'text-coptic-text hover:text-coptic-burgundy hover:bg-gray-50'"
                           class="px-3 py-2 rounded-md transition font-medium flex items-center gap-2">
                            <i :class="item.icon" class="text-coptic-gold text-sm"></i>
                            {{ t(item.key) }}
                        </button>
                    </div>

                    <!-- Right Side: Lang Switcher & Mobile Toggle -->
                    <div class="flex items-center gap-3">
                        <button @click="toggleLang" class="flex items-center gap-2 px-4 py-1.5 border border-coptic-burgundy/20 rounded-full hover:bg-coptic-burgundy hover:text-white transition text-sm font-bold text-coptic-burgundy">
                            <i class="fas fa-globe"></i>
                            <span>{{ locale === 'ar' ? 'Italiano' : 'العربية' }}</span>
                        </button>

                        <button @click="mobileMenuOpen = !mobileMenuOpen" class="md:hidden text-coptic-burgundy text-2xl p-2">
                            <i :class="mobileMenuOpen ? 'fas fa-times' : 'fas fa-bars'"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mobile Menu -->
            <transition name="fade">
                <div v-if="mobileMenuOpen" class="md:hidden bg-white border-t border-gray-100 absolute w-full shadow-lg z-50">
                    <div class="flex flex-col p-4 gap-2">
                        <button v-for="item in navItems" :key="item.key" 
                           @click="handleNavigation(item); mobileMenuOpen = false"
                           class="p-3 hover:bg-gray-50 rounded-lg flex items-center gap-3 text-coptic-burgundy w-full text-start">
                            <div class="w-8 h-8 rounded-full bg-red-50 flex items-center justify-center">
                                <i :class="item.icon"></i>
                            </div>
                            {{ t(item.key) }}
                        </button>
                    </div>
                </div>
            </transition>
        </nav>

        <!-- ================= Content Switcher ================= -->
        <main class="flex-grow">
            
            <!-- VIEW: HOME PAGE -->
            <div v-if="currentView === 'home'">
                <!-- Hero -->
                <section class="relative bg-coptic-burgundy py-16 text-white text-center overflow-hidden">
                    <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/arabesque.png')]"></div>
                    <div class="container mx-auto px-4 relative z-10 max-w-4xl">
                        <div class="mb-4 text-coptic-gold uppercase tracking-widest text-sm font-bold">{{ t('verseOfTheDay') }}</div>
                        <h2 class="text-2xl md:text-4xl leading-relaxed mb-6 font-serif">
                            <i class="fas fa-quote-right text-coptic-gold text-xl mx-2 opacity-50"></i>
                            {{ t('verseText') }}
                            <i class="fas fa-quote-left text-coptic-gold text-xl mx-2 opacity-50"></i>
                        </h2>
                        <p class="text-coptic-gold/80 italic text-lg">- {{ toLocalDigits(t('verseRef')) }}</p>
                    </div>
                </section>

                <!-- Daily Readings Grid -->
                <section class="py-16 bg-coptic-beige bg-pattern">
                    <div class="container mx-auto px-4">
                        <div class="text-center mb-12">
                            <h2 class="text-3xl font-bold text-coptic-burgundy mb-3">{{ t('dailyReadings') }}</h2>
                            <div class="w-24 h-1 bg-coptic-gold mx-auto rounded-full"></div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div v-for="reading in readings" :key="reading.key" class="church-card bg-white p-6 rounded-xl shadow-sm border border-gray-100 cursor-pointer">
                                <div class="flex items-center gap-4 mb-4">
                                    <div class="icon-circle"><i :class="reading.icon"></i></div>
                                    <h3 class="font-bold text-xl text-coptic-burgundy">{{ t(reading.key) }}</h3>
                                </div>
                                <p class="text-gray-600 line-clamp-3 text-sm leading-relaxed mb-4">{{ t(reading.descKey) }}</p>
                                <span class="text-coptic-gold text-sm font-bold flex items-center gap-2 group">{{ t('readMore') }} <i :class="locale === 'ar' ? 'fa-arrow-left' : 'fa-arrow-right'" class="transition-transform group-hover:translate-x-1 rtl:group-hover:-translate-x-1"></i></span>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- Synaxarium & Word of Benefit (Brief) -->
                <section class="py-16 bg-white">
                    <div class="container mx-auto px-4">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div class="lg:col-span-2 bg-gray-50 p-8 rounded-2xl border-s-4 border-coptic-burgundy">
                                <div class="flex items-center gap-3 mb-4">
                                    <i class="fas fa-scroll text-coptic-gold text-2xl"></i>
                                    <h2 class="text-2xl font-bold text-coptic-burgundy">{{ t('synaxarium') }}</h2>
                                </div>
                                <h3 class="text-xl font-bold mb-4 text-coptic-burgundy font-serif">{{ t('synaxariumTitle') }}</h3>
                                <p class="text-gray-700 leading-8 text-justify">{{ t('synaxariumBody') }}</p>
                            </div>
                            <div class="lg:col-span-1 bg-coptic-burgundy text-white rounded-2xl p-8 flex flex-col justify-center text-center relative overflow-hidden">
                                <div class="absolute inset-0 opacity-10 bg-pattern"></div>
                                <i class="fas fa-heart text-coptic-gold text-3xl mb-4 relative z-10"></i>
                                <h3 class="text-xl font-bold mb-4 relative z-10">{{ t('wordOfBenefit') }}</h3>
                                <p class="text-lg italic relative z-10">"{{ t('benefitText') }}"</p>
                                <p class="text-coptic-gold text-sm mt-4 font-bold relative z-10">- {{ t('benefitAuthor') }}</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

        </main>

        <!-- ================= Footer ================= -->
        <footer class="bg-coptic-burgundy text-white pt-16 pb-8 border-t-4 border-coptic-gold mt-auto">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-10 mb-10">
                    <div class="text-center md:text-start">
                        <div class="flex items-center justify-center md:justify-start gap-3 mb-4">
                            <i class="fas fa-church text-3xl text-coptic-gold"></i>
                            <span class="text-2xl font-bold font-serif">{{ t('churchName') }}</span>
                        </div>
                        <p class="text-red-100 leading-relaxed text-sm opacity-80">{{ t('footerAbout') }}</p>
                    </div>
                    <div class="text-center">
                        <h4 class="text-coptic-gold font-bold uppercase tracking-wider mb-4">{{ t('quickLinks') }}</h4>
                        <ul class="space-y-2">
                            <li><a href="#" class="text-red-100 hover:text-white hover:underline">{{ t('liturgyTimes') }}</a></li>
                            <li><a href="#" class="text-red-100 hover:text-white hover:underline">{{ t('confessions') }}</a></li>
                        </ul>
                    </div>
                    <div class="text-center md:text-end">
                        <h4 class="text-coptic-gold font-bold uppercase tracking-wider mb-4">{{ t('contactUs') }}</h4>
                        <p class="text-red-100 mb-2"><i class="fas fa-map-marker-alt mx-2"></i> {{ t('address') }}</p>
                        <p class="text-red-100 mb-2"><i class="fas fa-phone mx-2"></i> {{ toLocalDigits('+39 012 345 6789') }}</p>
                    </div>
                </div>
                <div class="border-t border-white/10 pt-8 text-center text-sm text-red-200">
                    <p>&copy; {{ toLocalDigits('2025') }} {{ t('churchName') }}. {{ t('copyrights') }}</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Vue App Logic -->
    <script>
        const { createApp, ref, computed, watch, onMounted } = Vue;
        const { createI18n, useI18n } = VueI18n;

        // Translation Data
        const messages = {
            ar: {
                churchName: "ام النور",
                city: "إيطاليا",
                home: "الرئيسية",
                agpeya: "الأجبية",
                euchologion: "الخولاجي",
                katamars: "القطمارس",
                synaxarium: "السنكسار",
                more: "المزيد",
                contactUs: "اتصل بنا",
                verseOfTheDay: "آية اليوم",
                verseText: "لأَنَّهُ هكَذَا أَحَبَّ اللهُ الْعَالَمَ حَتَّى بَذَلَ ابْنَهُ الْوَحِيدَ، لِكَيْ لاَ يَهْلِكَ كُلُّ مَنْ يُؤْمِنُ بِهِ، بَلْ تَكُونُ لَهُ الْحَيَاةُ الأَبَدِيَّةُ.",
                verseRef: "يوحنا ٣ : ١٦",
                dailyReadings: "قراءات اليوم",
                readMore: "اقرأ المزيد",
                synaxariumTitle: "استشهاد القديس مارمرقس الرسول",
                synaxariumBody: "في مثل هذا اليوم استشهد القديس العظيم مارمرقس الرسول كاروز الديار المصرية، وأول باباوات الإسكندرية. كرز بالإنجيل في مصر وليبيا والسودان.",
                wordOfBenefit: "كلمة منفعة",
                benefitText: "لا توجد فضيلة بدون اتضاع، ولا توجد رذيلة بدون كبرياء.",
                benefitAuthor: "الأنبا أنطونيوس",
                matins: "إنجيل باكر",
                pauline: "البولس",
                catholic: "الكاثوليكون",
                acts: "الإبركسيس",
                psalm: "المزمور",
                gospel: "الإنجيل",
                matinsDesc: "من إنجيل معلمنا مرقس البشير... باكر.",
                paulineDesc: "فصل من رسالة معلمنا بولس الرسول إلى أهل رومية.",
                catholicDesc: "فصل من رسالة معلمنا يعقوب الرسول.",
                actsDesc: "فصل من أعمال آبائنا الرسل الأطهار.",
                psalmDesc: "من مزامير تراتيل أبينا داود النبي.",
                gospelDesc: "مزمور وإنجيل القداس الإلهي حسب طقس اليوم.",
                footerAbout: "كنيسة قبطية أرثوذكسية، تقدم خدمات روحية واجتماعية للجالية المصرية والإيطالية.",
                quickLinks: "روابط سريعة",
                liturgyTimes: "مواعيد القداسات",
                confessions: "الاعترافات",
                address: "",
                copyrights: "جميع الحقوق محفوظة"
            },
            it: {
                churchName: "Madre della Luce",
                city: "Italia",
                home: "Home",
                agpeya: "Agpeya",
                euchologion: "Eucologio",
                katamars: "Katamars",
                synaxarium: "Sinassario",
                more: "Altro",
                contactUs: "Contattaci",
                verseOfTheDay: "Versetto del Giorno",
                verseText: "Poiché Dio ha tanto amato il mondo, che ha dato il suo unigenito Figlio, affinché chiunque crede in lui non perisca, ma abbia vita eterna.",
                verseRef: "Giovanni 3:16",
                dailyReadings: "Letture del Giorno",
                readMore: "Leggi di più",
                synaxariumTitle: "Martirio di San Marco Apostolo",
                synaxariumBody: "In questo giorno fu martirizzato il grande San Marco Apostolo, predicatore della terra d'Egitto, primo Papa di Alessandria.",
                wordOfBenefit: "Parola di Beneficio",
                benefitText: "Non c'è virtù senza umiltà, e non c'è vizio senza orgoglio.",
                benefitAuthor: "Sant'Antonio",
                matins: "Vangelo del Mattino",
                pauline: "Paoline",
                catholic: "Cattoliche",
                acts: "Atti degli Apostoli",
                psalm: "Salmo",
                gospel: "Vangelo",
                matinsDesc: "Dal Vangelo secondo San Marco... Mattino.",
                paulineDesc: "Dalla lettera di San Paolo ai Romani.",
                catholicDesc: "Dalla lettera di San Giacomo.",
                actsDesc: "Dagli Atti degli Apostoli.",
                psalmDesc: "Dai Salmi del nostro padre Davide.",
                gospelDesc: "Salmo e Vangelo della Divina Liturgia.",
                footerAbout: "Chiesa Copta Ortodossa, offre servizi spirituali e sociali per la comunità egiziana e italiana.",
                quickLinks: "Link Rapidi",
                liturgyTimes: "Orari delle Liturgie",
                confessions: "Confessioni",
                address: "",
                copyrights: "Tutti i diritti riservati"
            }
        };

        const i18n = createI18n({
            locale: 'ar',
            fallbackLocale: 'en',
            messages,
            legacy: false
        });

        const app = createApp({
            setup() {
                const { t, locale } = useI18n();
                const mobileMenuOpen = ref(false);
                const currentView = ref('home');

                // Helper to convert numbers to Arabic numerals
                const toLocalDigits = (str) => {
                    if (!str) return '';
                    if (locale.value !== 'ar') return str;
                    return str.toString().replace(/\d/g, d => '٠١٢٣٤٥٦٧٨٩'[d]);
                };

                // Watch Language Changes
                watch(locale, (newLang) => {
                    document.documentElement.setAttribute('lang', newLang);
                    document.documentElement.setAttribute('dir', newLang === 'ar' ? 'rtl' : 'ltr');
                    if(newLang === 'ar') {
                        document.body.classList.remove('font-it');
                        document.body.classList.add('font-ar');
                    } else {
                        document.body.classList.remove('font-ar');
                        document.body.classList.add('font-it');
                    }
                }, { immediate: true });

                const toggleLang = () => { locale.value = locale.value === 'ar' ? 'it' : 'ar'; };
                
                // Navigation Helper (Updated to handle links)
                const handleNavigation = (item) => {
                    if (item.link) {
                        window.location.href = item.link;
                    } else if (item.view) {
                        currentView.value = item.view;
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                };

                // Navigation Items (Agpeya links to external file now)
                const navItems = [
                    { key: 'home', icon: 'fas fa-home', view: 'home' },
                    { key: 'agpeya', icon: 'fas fa-clock', link: 'agpeya.html' },
                    { key: 'euchologion', icon: 'fas fa-book-open', link: 'kholagy.html' },
                    { key: 'katamars', icon: 'fas fa-book-bible', link: 'katamars.html' },
                    { key: 'synaxarium', icon: 'fas fa-scroll', link: 'synaxarium.html' },
                    { key: 'more', icon: 'fas fa-ellipsis-h', view: null },
                    { key: 'contactUs', icon: 'fas fa-envelope', link: 'contact.html' },
                ];

                // Readings
                const readings = [
                    { key: 'matins', icon: 'fas fa-sun', descKey: 'matinsDesc' },
                    { key: 'pauline', icon: 'fas fa-envelope-open-text', descKey: 'paulineDesc' },
                    { key: 'catholic', icon: 'fas fa-globe', descKey: 'catholicDesc' },
                    { key: 'acts', icon: 'fas fa-history', descKey: 'actsDesc' },
                    { key: 'psalm', icon: 'fas fa-music', descKey: 'psalmDesc' },
                    { key: 'gospel', icon: 'fas fa-bible', descKey: 'gospelDesc' },
                ];

                const currentDate = computed(() => {
                    const d = new Date();
                    return d.toLocaleDateString(locale.value === 'ar' ? 'ar-EG' : 'it-IT', { 
                        weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' 
                    });
                });

                const copticDate = computed(() => {
                    return locale.value === 'ar' ? "١٧ توت ١٧٤١ ش" : "17 Tout 1741 AM";
                });

                return {
                    t,
                    locale,
                    toggleLang,
                    navItems,
                    readings,
                    mobileMenuOpen,
                    currentDate,
                    copticDate,
                    toLocalDigits,
                    currentView,
                    handleNavigation
                };
            }
        });

        app.use(i18n);
        app.mount('#app');
    </script>
</body>
</html>
